{{define "title"}}หน้าแรก – {{.Website}}{{end}} {{define "content"}}
<main class="page-home">
  <section class="hero">
    <h1>{{.Website}}</h1>
    <p>มังงะใหม่ มาแรง และเรตติ้งสูงสุด</p>
  </section>

  <section id="NewManga" class="NewManga section">
    <h2 class="section-title">มังงะใหม่</h2>
    <div class="scroll-wrap">
      <button class="scroll-btn scroll-left" aria-label="เลื่อนซ้าย">
        &#10094;
      </button>
      <div class="manga-scroll">
        {{range .NewManga}}{{template "components/manga-card" .}}{{end}}
      </div>
      <button class="scroll-btn scroll-right" aria-label="เลื่อนขวา">
        &#10095;
      </button>
    </div>
  </section>

  <section id="HotManga" class="HotManga section">
    <h2 class="section-title">มังงะมาแรง</h2>
    <div class="scroll-wrap">
      <button class="scroll-btn scroll-left" aria-label="เลื่อนซ้าย">
        &#10094;
      </button>
      <div class="manga-scroll">
        {{range .TrendingManga}}{{template "components/manga-card" .}}{{end}}
      </div>
      <button class="scroll-btn scroll-right" aria-label="เลื่อนขวา">
        &#10095;
      </button>
    </div>
  </section>

  <section id="Top10Rating" class="Top10Rating section">
    <h2 class="section-title">Top 10 เรตติ้ง</h2>
    <div class="tabs" role="tablist">
      <button type="button" class="tab active" data-tab="monthly" role="tab">
        ประจำเดือน
      </button>
      <button type="button" class="tab" data-tab="yearly" role="tab">
        ประจำปี
      </button>
      <button type="button" class="tab" data-tab="alltime" role="tab">
        ตลอดกาล
      </button>
    </div>
    <div class="tab-panels">
      <div class="tab-panel active" id="panel-monthly" role="tabpanel">
        <div class="manga-grid">
          {{range .Top10Monthly}}{{template "components/manga-card" .}}{{end}}
        </div>
      </div>
      <div class="tab-panel" id="panel-yearly" role="tabpanel" hidden>
        <div class="manga-grid">
          {{range .Top10Yearly}}{{template "components/manga-card" .}}{{end}}
        </div>
      </div>
      <div class="tab-panel" id="panel-alltime" role="tabpanel" hidden>
        <div class="manga-grid">
          {{range .Top10AllTime}}{{template "components/manga-card" .}}{{end}}
        </div>
      </div>
    </div>
  </section>
</main>
<script>
  (function () {
    var section =
      document.querySelector(".section .tabs") &&
      document.querySelector(".section .tabs").closest(".section");
    if (!section) return;
    var tabs = section.querySelectorAll(".tab");
    var panels = section.querySelectorAll(".tab-panel");
    tabs.forEach(function (btn) {
      btn.addEventListener("click", function () {
        var id = this.getAttribute("data-tab");
        tabs.forEach(function (b) {
          b.classList.remove("active");
        });
        panels.forEach(function (p) {
          p.classList.remove("active");
          p.hidden = true;
        });
        this.classList.add("active");
        var panel = document.getElementById("panel-" + id);
        if (panel) {
          panel.classList.add("active");
          panel.hidden = false;
        }
      });
    });
  })();

  // Scroll buttons
  document.querySelectorAll(".scroll-wrap").forEach(function (wrap) {
    var row = wrap.querySelector(".manga-scroll");
    var btnL = wrap.querySelector(".scroll-left");
    var btnR = wrap.querySelector(".scroll-right");
    if (!row || !btnL || !btnR) return;
    var step = 400;
    btnL.addEventListener("click", function () {
      row.scrollBy({ left: -step, behavior: "smooth" });
    });
    btnR.addEventListener("click", function () {
      row.scrollBy({ left: step, behavior: "smooth" });
    });
  });
</script>
{{end}}
